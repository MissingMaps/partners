language: node_js

node_js:
- '6'

env:
  global:
  - CXX=g++-4.8
  - GH_REF=github.com/MissingMaps/partners
  - DEPLOY_BRANCH=master
  - TARGET_BRANCH=gh-pages
  - secure: gn7Uli3Q1DSzL5Qx6Vroo6RjHmHIYD89hH8qmDYX1nPOStW2YYpWfIeYkyY9rj2EkErSvVk0pV6atxJos2Qw4vglXNOaHkFYpy+b+CHCtI5GsDbKtsgbZWd0F8Z5aqfbB33G/AfzCAfiY8yTYKHzcOpZ0QNb6/LjTflecp7pJ2AyGv5aBIHS5nU3m3I52fuSRaVxAYJ/ksakVdHS/GfTTuU+OTYsij5Sal9vnazks/kLm5sF62B+hGNGBgcyPKnHKcYr8xytA4sfHL5vKFmSsesyn8Wgk3VzazRPcG+r46sUWovO+47yfN225oXkVlcwMJQ2aGeynm5lAv26lYC1B5yKut1N2Q9TeNLlGkBs1/h6yzdBHljj61Cmuy9pjzNOWKU3de9S7rNvq/c2r5NkjPAE2OZM3LvOxiQ/xKrZVUvO4u9+oRDf0yKutG/8Kq6eDQPXn1w3KeHNoEsd/maugUpaZMM8KVL1jBLUI9M9CXJqJUIQI9rWyvgswZkBvy+hJ2VSj89mO5UfPv+wUu2YAslcbaV92grvMP8E9JZGP0cDvbQVrxkjkYxRmJz24eqtPwiF2rzlAwxB2VjzbiOxClFdPxCXc49SOCKFdc852+XIP+AYxQ9N0Rori8xYWquv6LZMjDLgpciEqd/e21dH0IJSF5VVzysQkW+N7/ZzSAk=

addons:
  apt:
    sources:
    - ubuntu-toolchain-r-test
    packages:
    - g++-4.8

cache:
  apt: true
  directories:
  - node_modules

before_install:
  - chmod +x ./.build_scripts/deploy.sh
  - rvm install 2.3.1

before_script:
  - npm install

script:
  - gulp prod

after_success:
  - "./.build_scripts/deploy.sh"
